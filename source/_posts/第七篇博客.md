---
title: JS 里的函数
date: 2017-12-16 19:08:02
tags:
---

#### 什么是函数

函数就是一段可以反复调用的代码块。

-------
#### 函数的5种声明
   
##### 1.function命令
	function print(s) {   //print是函数名，也叫标识符
	console.log(s);   //这是函数体
	} //函数的声明在结尾的大括号后面不用加分号	
##### 2.函数表达式(匿名)
	var print = function (s) { //这个匿名函数又称函数表达式
	console.log(s); 
	 }; //函数的表达式需要在语句的结尾加上分号，表示语句结束	 
注意：采用函数表达式声明函数时，function命令后面不带有函数名。
      如果加上函数名，该函数名只在函数体内部有效，在函数体外部无效。
      
	var print = function x(){
	  console.log(typeof x);
	};
	x// ReferenceError: x is not defined
	print()// function	
	
##### 3.函数表达式(具名)
	var print = function  f(s) { 
	  console.log(s); 
	};	
	
##### 4.Function构造函数（一般不用）(window.Function函数对象)
	var add = new Function(
	  'x',
	  'y',
	  'return x + y'
	);
	// 等同于
	function add(x, y) {
	  return x + y;
	} 
	
##### 5.箭头函数(匿名) (x , y) => { return x + y }
基础语法

	(参数1, 参数2, …, 参数N) => {函数声明}
	(参数1, 参数2, …, 参数N) => 表达式（单一）
	//相当于：(参数1, 参数2, …, 参数N) =>{ return表达式}
	
	// 当只有一个参数时，圆括号是可选的：
	(单一参数) => {函数声明}
	单一参数 => {函数声明}
	
	// 没有参数的函数应该写成一对圆括号。
	() => {函数声明}
-------
#### 函数的属性和方法
##### name属性
name属性返回紧跟在function关键字之后的那个函数名。
  
##### length属性
length属性返回函数预先定义的参数个数。

-------

#### 函数作用域
##### 定义
作用域（scope）指的是变量存在的范围。Javascript只有两种作用域：

	(1)全局作用域：变量在整个程序中一直存在，所有地方都可以读取；
	     在函数外部声明的变量就是全局变量。
	     
	(2)函数作用域：在函数内部定义的变量，外部无法读取。

注意：函数内部定义的变量，会在该作用域内覆盖同名全局变量。
     对于var命令来说，局部变量只能在函数内部声明，在其他区块中声明，一	  律都是全局变量。
       
-------  
#### 函数内部的变量提升
var命令声明的变量，不管在什么位置，变量声明都会被提升到函数体的头部。

	function foo(x) {
	  if (x > 100) {
	    var tmp = x - 100; //会升到函数体头部
	  }
	}
-------

#### 闭包
如果一个函数，使用了它范围外的变量，那么‘这个函数+这个变量’就叫做闭包.

-------

#### 调用函数
    f.call(undefined，参数1，参数2) 
    
-------

#### 问题归纳
this和arguments

	1.this 是函数的第一个参数
	
	2.arguments 是函数的第一个参数

扩展：

	#####普通模式
	如果 this 是 undefined，浏览器会把 this 变成 window.
	
	#####“use strict”严格模式
	第一个参数是什么，浏览器会把 this 变成什么.

##### `this`的历史原因
要长得像 Java，让Java 程序员来学 JS ，但是他们发现 this 多余，就有了 “use strict” 

##### 关于`function`的`name`属性问题
	function f1() {}; f1.name // 'f1'
	var f2 = function () {}; f2.name // ‘f2’
	var f3 = function f4() {}; f3.name // ‘f4’
	f5 = new Function('x', 'y','return x + y’){};   
	f5.name//‘anonymous’ (匿名)  

##### `function print(){}`和`var s = function print(){}`区别

	不一致性
	输入console.log(print)时：
	function print(){}可以访问，var s = function print(){}不能访问

##### `f``f.call()``f()`的区别

	f 只是一个变量，指的是这个对象
	f.call(undefined，参数1，参数2) 是真正的调用方式（硬核）指的是这个对象的函数体
	f() 是简单的调用方式

##### `call stack`先入后出
`call stack`调用堆栈，调用堆栈是一个方法列表，按调用顺序保存所有在运行期被调用的方法。

	function a(){
		console.log(‘a’)
		return a
	}
	a.call() 
当调用时，```a.call()```会被记在 call stack 里。接着 ```console.log(‘a’)``` 记在 call stack 里。```return a``` 到这一步时```console.log(‘a’)```会存在```a.call()```里，最后```a.call()```退回来

-------
部分参考自：阮一峰的《JavaScript 标准参考教程》<http://javascript.ruanyifeng.com/grammar/function.html>



